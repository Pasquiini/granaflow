<div class="max-w-md mx-auto p-6 rounded-2xl shadow">
  <h1 class="text-2xl font-semibold mb-4">Definir nova senha</h1>

  <p *ngIf="loading">Carregando...</p>

  <ng-container *ngIf="!loading">
    <p class="text-sm text-red-600 mb-3" *ngIf="errorMsg">{{ errorMsg }}</p>

    <form *ngIf="ready && !successMsg" [formGroup]="form" (ngSubmit)="submit()" novalidate>
      <label class="block text-sm mb-1">Nova senha</label>
      <input
        type="password"
        formControlName="password"
        class="w-full border rounded px-3 py-2 mb-2"
        placeholder="••••••••"
      />

      <label class="block text-sm mb-1">Confirmar senha</label>
      <input
        type="password"
        formControlName="confirm"
        class="w-full border rounded px-3 py-2 mb-2"
        placeholder="••••••••"
      />

      <div
        class="text-sm text-red-600 mb-2"
        *ngIf="form.errors?.['mismatch'] && form.controls['confirm'].touched"
      >
        As senhas não coincidem.
      </div>

      <button class="w-full rounded px-4 py-2 border disabled:opacity-60" [disabled]="loading">
        {{ loading ? 'Salvando…' : 'Salvar nova senha' }}
      </button>
    </form>

    <p class="text-green-700" *ngIf="successMsg">{{ successMsg }}</p>
  </ng-container>
</div>

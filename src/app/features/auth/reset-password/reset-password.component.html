<form *ngIf="ready && !successMsg" [formGroup]="form" (ngSubmit)="submit()" novalidate>
  <label class="block text-sm mb-1">Nova senha</label>
  <input
    type="password"
    formControlName="password"
    class="w-full border rounded px-3 py-2 mb-2"
    placeholder="••••••••"
    autocomplete="new-password"
    [class.border-red-500]="form.controls['password'].touched && form.controls['password'].invalid"
  />
  <div class="text-sm text-red-600 mb-2"
       *ngIf="form.controls['password'].touched && form.controls['password'].errors">
    <span *ngIf="form.controls['password'].errors['required']">Informe a nova senha.</span>
    <span *ngIf="form.controls['password'].errors['minlength']">Mínimo de 8 caracteres.</span>
  </div>

  <label class="block text-sm mb-1">Confirmar senha</label>
  <input
    type="password"
    formControlName="confirm"
    class="w-full border rounded px-3 py-2 mb-2"
    placeholder="••••••••"
    autocomplete="new-password"
    [class.border-red-500]="form.errors?.['mismatch'] && form.controls['confirm'].touched"
  />
  <div class="text-sm text-red-600 mb-2"
       *ngIf="form.errors?.['mismatch'] && form.controls['confirm'].touched">
    As senhas não coincidem.
  </div>

  <button
    class="w-full rounded px-4 py-2 border disabled:opacity-60"
    [disabled]="loading || form.invalid">
    {{ loading ? 'Salvando…' : 'Salvar nova senha' }}
  </button>
</form>
